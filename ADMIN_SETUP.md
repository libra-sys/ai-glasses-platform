# 管理员设置指南

## 如何设置管理员账号

本平台的管理员权限需要在数据库中手动设置。以下是详细步骤：

### 方法一：通过Supabase控制台设置

1. **登录Supabase控制台**
   - 访问 [https://supabase.com](https://supabase.com)
   - 登录您的账号
   - 选择对应的项目

2. **进入Table Editor**
   - 在左侧菜单中点击 "Table Editor"
   - 选择 `profiles` 表

3. **找到目标用户**
   - 在表中找到需要设置为管理员的用户记录
   - 可以通过 `username` 字段查找

4. **修改role字段**
   - 点击该用户记录的 `role` 字段
   - 将值从 `user` 修改为 `admin`
   - 保存更改

5. **验证设置**
   - 使用该账号登录平台
   - 检查是否能访问管理后台（/admin路径）

### 方法二：通过SQL命令设置

如果您熟悉SQL，可以直接执行以下命令：

```sql
-- 通过用户名设置管理员
UPDATE profiles 
SET role = 'admin'::user_role 
WHERE username = '目标用户名';

-- 或者通过用户ID设置管理员
UPDATE profiles 
SET role = 'admin'::user_role 
WHERE id = '用户UUID';
```

执行步骤：
1. 在Supabase控制台中点击 "SQL Editor"
2. 输入上述SQL命令（替换为实际的用户名或ID）
3. 点击 "Run" 执行
4. 检查执行结果

### 验证管理员权限

设置完成后，管理员账号应该具有以下权限：

- ✅ 访问管理后台（/admin）
- ✅ 审核组件（通过/拒绝）
- ✅ 删除任意组件
- ✅ 发布和管理公告
- ✅ 查看所有用户信息

### 注意事项

1. **安全性**
   - 请谨慎设置管理员权限
   - 建议只给可信任的用户设置管理员权限
   - 定期检查管理员账号列表

2. **权限说明**
   - `user`: 普通用户，可以发布组件、评论、收藏
   - `admin`: 管理员，拥有所有权限

3. **撤销管理员权限**
   - 如需撤销管理员权限，将 `role` 字段改回 `user` 即可

### 常见问题

**Q: 可以有多个管理员吗？**
A: 可以。您可以为多个用户设置管理员权限。

**Q: 管理员可以删除其他管理员吗？**
A: 目前管理员无法在前端界面删除用户，只能在数据库中操作。

**Q: 忘记管理员账号怎么办？**
A: 在Supabase控制台的profiles表中查询 `role = 'admin'` 的记录即可找到所有管理员账号。

**Q: 新注册的用户会自动成为管理员吗？**
A: 不会。所有新注册用户默认都是普通用户（role = 'user'），需要手动设置为管理员。

## 管理员功能说明

### 组件管理
- 查看所有组件（包括待审核、已通过、已拒绝状态）
- 审核待审核的组件
- 删除不合适的组件
- 查看组件详细信息和统计数据

### 公告管理
- 发布新公告
- 设置公告优先级（高、普通、低）
- 激活/停用公告
- 删除公告
- 编辑公告内容

### 用户管理
- 查看所有注册用户
- 查看用户角色和注册时间
- 查看用户发布的组件数量

---

如有任何问题，请联系技术支持。
